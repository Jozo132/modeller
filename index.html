<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CAD Modeller</title>
  <link rel="stylesheet" href="css/style.css" />
  <!-- WASM-based rendering engine (no import map needed) -->
</head>
<body>
  <!-- Quick-Start Page -->
  <div id="quick-start" class="quick-start-overlay">
    <div class="quick-start-content">
      <h1 class="quick-start-title">CAD Modeller</h1>
      <p class="quick-start-subtitle">Choose a workspace to get started</p>
      <div class="quick-start-options">
        <button class="quick-start-card" id="qs-sketch" title="2D Sketch workspace">
          <div class="qs-icon"><svg viewBox="0 0 48 48"><line x1="8" y1="40" x2="40" y2="8" stroke-width="2.5"/><rect x="6" y="6" width="36" height="36" rx="3" fill="none" stroke-width="1.5" opacity="0.3"/></svg></div>
          <span class="qs-label">Sketch</span>
          <span class="qs-desc">2D drawing with constraints, dimensions &amp; CAD export</span>
        </button>
        <button class="quick-start-card" id="qs-part" title="3D Part workspace">
          <div class="qs-icon"><svg viewBox="0 0 48 48"><rect x="10" y="22" width="20" height="16" fill="none" stroke-width="2"/><rect x="16" y="12" width="20" height="16" fill="none" stroke-width="2"/><line x1="10" y1="22" x2="16" y2="12" stroke-width="1.5"/><line x1="30" y1="22" x2="36" y2="12" stroke-width="1.5"/><line x1="10" y1="38" x2="16" y2="28" stroke-width="1.5"/><line x1="30" y1="38" x2="36" y2="28" stroke-width="1.5"/></svg></div>
          <span class="qs-label">Part</span>
          <span class="qs-desc">3D parametric part design with sketches &amp; features</span>
        </button>
        <button class="quick-start-card disabled" id="qs-assembly" title="Assembly workspace (coming soon)">
          <div class="qs-icon"><svg viewBox="0 0 48 48"><rect x="6" y="26" width="14" height="14" fill="none" stroke-width="2"/><rect x="28" y="26" width="14" height="14" fill="none" stroke-width="2"/><rect x="17" y="8" width="14" height="14" fill="none" stroke-width="2"/><line x1="20" y1="22" x2="13" y2="26" stroke-width="1.5" stroke-dasharray="2,2"/><line x1="28" y1="22" x2="35" y2="26" stroke-width="1.5" stroke-dasharray="2,2"/></svg></div>
          <span class="qs-label">Assembly</span>
          <span class="qs-desc">Multi-part assembly design (coming soon)</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Toolbar -->
  <div id="toolbar">
    <div class="tool-group">
      <button id="btn-new" title="New Drawing (Ctrl+N)"><svg viewBox="0 0 20 20"><path d="M4 2h8l4 4v12H4V2z"/><path d="M12 2v4h4" fill="none"/></svg></button>
      <button id="btn-open" title="Open DXF"><svg viewBox="0 0 20 20"><path d="M2 16V6h5l2 2h7v8H2z"/></svg></button>
      <button id="btn-save" title="Save DXF (Ctrl+S)"><svg viewBox="0 0 20 20"><path d="M4 2h10l4 4v10a2 2 0 01-2 2H4a2 2 0 01-2-2V4a2 2 0 012-2z"/><rect x="6" y="2" width="8" height="6" rx="0.5"/><rect x="5" y="12" width="10" height="5" rx="0.5"/></svg></button>
    </div>
    <div class="toolbar-sep"></div>
    <div class="tool-group" data-group="draw">
      <span class="group-label">Draw</span>
      <button id="btn-construction" title="Construction Mode (Q)"><svg viewBox="0 0 20 20"><line x1="4" y1="6" x2="16" y2="6"/><line x1="4" y1="14" x2="7" y2="14"/><line x1="9" y1="14" x2="10.5" y2="14"/><line x1="12.5" y1="14" x2="16" y2="14"/></svg></button>
      <button id="btn-line" title="Line (L)" data-tool="line"><svg viewBox="0 0 20 20"><line x1="3" y1="17" x2="17" y2="3"/></svg></button>
      <button id="btn-rect" title="Rectangle (R)" data-tool="rectangle"><svg viewBox="0 0 20 20"><rect x="3" y="5" width="14" height="10" fill="none"/></svg></button>
      <button id="btn-circle" title="Circle (C)" data-tool="circle"><svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="7" fill="none"/></svg></button>
      <button id="btn-arc" title="Arc (A)" data-tool="arc"><svg viewBox="0 0 20 20"><path d="M4 16A9 9 0 0116 4" fill="none"/></svg></button>
      <button id="btn-polyline" title="Polyline (P)" data-tool="polyline"><svg viewBox="0 0 20 20"><polyline points="2,16 7,4 13,14 18,3" fill="none"/></svg></button>
      <button id="btn-text" title="Text (T)" data-tool="text"><svg viewBox="0 0 20 20"><text x="4" y="16" font-size="15" font-weight="700" fill="currentColor" stroke="none">T</text></svg></button>
    </div>
    <div class="toolbar-sep"></div>
    <div class="tool-group" data-group="edit">
      <span class="group-label">Edit</span>
      <button id="btn-select" title="Select (Esc)" data-tool="select"><svg viewBox="0 0 20 20"><path d="M5 2l10 8-5 1-2 5z"/></svg></button>
      <button id="btn-move" title="Move (M)" data-tool="move"><svg viewBox="0 0 20 20"><path d="M10 2l3 3h-2v4h4V7l3 3-3 3v-2h-4v4h2l-3 3-3-3h2v-4H5v2L2 10l3-3v2h4V5H7z"/></svg></button>
      <button id="btn-copy" title="Copy (Ctrl+D)" data-tool="copy"><svg viewBox="0 0 20 20"><rect x="6" y="2" width="10" height="12" rx="1" fill="none"/><rect x="3" y="6" width="10" height="12" rx="1" fill="none"/></svg></button>
      <button id="btn-trim" title="Trim (X)" data-tool="trim"><svg viewBox="0 0 20 20"><line x1="2" y1="10" x2="18" y2="10"/><line x1="10" y1="3" x2="10" y2="17" stroke-dasharray="2,2"/><line x1="11" y1="10" x2="18" y2="10" stroke="var(--text-secondary)" stroke-width="2"/></svg></button>
      <button id="btn-split" title="Split (K)" data-tool="split"><svg viewBox="0 0 20 20"><line x1="2" y1="10" x2="8" y2="10"/><line x1="12" y1="10" x2="18" y2="10"/><circle cx="10" cy="10" r="2" fill="currentColor" stroke="none"/></svg></button>
      <button id="btn-delete" title="Delete (Del)"><svg viewBox="0 0 20 20"><polyline points="5,6 7,17 13,17 15,6" fill="none"/><line x1="3" y1="6" x2="17" y2="6"/><path d="M8 3h4v3H8z" fill="none"/></svg></button>
      <button id="btn-undo" title="Undo (Ctrl+Z)"><svg viewBox="0 0 20 20"><path d="M4 10c0-4 3-7 7-7s7 3 7 7-3 7-7 7" fill="none"/><polygon points="2,10 5,7 5,13" fill="currentColor" stroke="none"/></svg></button>
      <button id="btn-redo" title="Redo (Ctrl+Y)"><svg viewBox="0 0 20 20"><path d="M16 10c0-4-3-7-7-7S2 6 2 10s3 7 7 7" fill="none"/><polygon points="18,10 15,7 15,13" fill="currentColor" stroke="none"/></svg></button>
    </div>
    <div class="toolbar-sep"></div>
    <div class="tool-group" data-group="constrain">
      <span class="group-label">Constrain</span>
      <button id="btn-dimension" title="Smart Dimension (D)" data-tool="dimension"><svg viewBox="0 0 20 20"><line x1="3" y1="14" x2="17" y2="14"/><line x1="3" y1="11" x2="3" y2="17"/><line x1="17" y1="11" x2="17" y2="17"/><polygon points="5,13 3,14 5,15" fill="currentColor" stroke="none"/><polygon points="15,13 17,14 15,15" fill="currentColor" stroke="none"/></svg></button>
      <button id="btn-coincident" title="Coincident" data-tool="coincident"><svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="3" fill="currentColor" stroke="none"/><circle cx="10" cy="10" r="6" fill="none"/></svg></button>
      <button id="btn-horizontal" title="Horizontal" data-tool="horizontal"><svg viewBox="0 0 20 20"><line x1="3" y1="10" x2="17" y2="10"/><text x="3" y="7" font-size="6" fill="currentColor" stroke="none">H</text></svg></button>
      <button id="btn-vertical" title="Vertical" data-tool="vertical"><svg viewBox="0 0 20 20"><line x1="10" y1="3" x2="10" y2="17"/><text x="12" y="8" font-size="6" fill="currentColor" stroke="none">V</text></svg></button>
      <button id="btn-parallel" title="Parallel" data-tool="parallel"><svg viewBox="0 0 20 20"><line x1="3" y1="7" x2="17" y2="7"/><line x1="3" y1="13" x2="17" y2="13"/></svg></button>
      <button id="btn-perpendicular" title="Perpendicular" data-tool="perpendicular"><svg viewBox="0 0 20 20"><line x1="3" y1="17" x2="3" y2="3"/><line x1="3" y1="17" x2="17" y2="17"/><rect x="3" y="12" width="5" height="5" fill="none"/></svg></button>
      <button id="btn-distance" title="Fixed Distance" data-tool="distance"><svg viewBox="0 0 20 20"><circle cx="5" cy="10" r="2" fill="currentColor" stroke="none"/><circle cx="15" cy="10" r="2" fill="currentColor" stroke="none"/><line x1="7" y1="10" x2="13" y2="10" stroke-dasharray="2,2"/></svg></button>
      <button id="btn-lock" title="Lock Point" data-tool="lock"><svg viewBox="0 0 20 20"><rect x="4" y="9" width="12" height="9" rx="1.5" fill="none"/><path d="M7 9V6a3 3 0 016 0v3" fill="none"/></svg></button>
      <button id="btn-equal" title="Equal Length" data-tool="equal"><svg viewBox="0 0 20 20"><line x1="3" y1="8" x2="17" y2="8"/><line x1="3" y1="12" x2="17" y2="12"/></svg></button>
      <button id="btn-tangent" title="Tangent" data-tool="tangent"><svg viewBox="0 0 20 20"><circle cx="8" cy="10" r="5" fill="none"/><line x1="13" y1="4" x2="13" y2="16"/></svg></button>
      <button id="btn-angle" title="Angle" data-tool="angle"><svg viewBox="0 0 20 20"><line x1="3" y1="17" x2="17" y2="17"/><line x1="3" y1="17" x2="12" y2="5"/><path d="M8 17 A5 5 0 0 1 6.5 13" fill="none"/><text x="9" y="15" font-size="6" fill="currentColor" stroke="none">‚à†</text></svg></button>
    </div>
    <div class="toolbar-sep"></div>
    <div class="tool-group" data-group="ops">
      <span class="group-label">Ops</span>
      <button id="btn-disconnect" title="Disconnect Point" data-tool="disconnect"><svg viewBox="0 0 20 20"><circle cx="7" cy="10" r="2.5" fill="none"/><circle cx="13" cy="10" r="2.5" fill="none"/><line x1="4" y1="4" x2="16" y2="16" stroke-dasharray="2,2"/></svg></button>
      <button id="btn-union" title="Union / Join Points" data-tool="union"><svg viewBox="0 0 20 20"><circle cx="7" cy="10" r="2.5" fill="none"/><circle cx="13" cy="10" r="2.5" fill="none"/><path d="M9 8l2 2-2 2" fill="none"/></svg></button>
      <button id="btn-motion" title="Motion Analysis"><svg viewBox="0 0 20 20"><polygon points="6,4 6,16 16,10" fill="none"/><circle cx="10" cy="10" r="8" fill="none"/></svg></button>
    </div>
    <div class="toolbar-sep"></div>
    <div class="tool-group">
      <button id="btn-zoom-fit" title="Fit All (F)"><svg viewBox="0 0 20 20"><rect x="3" y="3" width="14" height="14" rx="1" fill="none"/><polyline points="3,8 3,3 8,3" fill="none"/><polyline points="12,3 17,3 17,8" fill="none"/><polyline points="17,12 17,17 12,17" fill="none"/><polyline points="8,17 3,17 3,12" fill="none"/></svg></button>
      <button id="btn-zoom-in" title="Zoom In (+)"><svg viewBox="0 0 20 20"><circle cx="9" cy="9" r="5" fill="none"/><line x1="13" y1="13" x2="17" y2="17"/><line x1="7" y1="9" x2="11" y2="9"/><line x1="9" y1="7" x2="9" y2="11"/></svg></button>
      <button id="btn-zoom-out" title="Zoom Out (-)"><svg viewBox="0 0 20 20"><circle cx="9" cy="9" r="5" fill="none"/><line x1="13" y1="13" x2="17" y2="17"/><line x1="7" y1="9" x2="11" y2="9"/></svg></button>
      <button id="btn-grid-toggle" title="Toggle Grid (G)"><svg viewBox="0 0 20 20"><line x1="7" y1="2" x2="7" y2="18"/><line x1="13" y1="2" x2="13" y2="18"/><line x1="2" y1="7" x2="18" y2="7"/><line x1="2" y1="13" x2="18" y2="13"/></svg></button>
      <button id="btn-snap-toggle" title="Snap (S)" class="active"><svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="4" fill="none"/><circle cx="10" cy="10" r="1.5" fill="currentColor" stroke="none"/><line x1="10" y1="2" x2="10" y2="6"/><line x1="10" y1="14" x2="10" y2="18"/><line x1="2" y1="10" x2="6" y2="10"/><line x1="14" y1="10" x2="18" y2="10"/></svg></button>
      <button id="btn-autocoincidence-toggle" title="Auto-Connect Coincidences" class="active"><svg viewBox="0 0 20 20"><circle cx="7" cy="10" r="3" fill="none"/><circle cx="13" cy="10" r="3" fill="none"/><line x1="10" y1="10" x2="10" y2="10" stroke-width="2"/><circle cx="10" cy="10" r="1" fill="currentColor" stroke="none"/></svg></button>
      <button id="btn-ortho-toggle" title="Ortho (O)"><svg viewBox="0 0 20 20"><line x1="3" y1="17" x2="3" y2="3"/><line x1="3" y1="17" x2="17" y2="17"/><text x="6" y="14" font-size="9" fill="currentColor" stroke="none">90</text></svg></button>
    </div>
    <div class="toolbar-sep mode-3d-sep"></div>
    <div class="tool-group" data-group="3d">
      <span class="group-label">3D</span>
      <button id="btn-3d-mode" title="Toggle 3D View (3)"><svg viewBox="0 0 20 20"><rect x="2" y="7" width="7" height="7" fill="none"/><rect x="5" y="4" width="7" height="7" fill="none"/><rect x="8" y="7" width="7" height="7" fill="none"/></svg></button>
      <button id="btn-add-sketch" title="Add Sketch to Part" disabled><svg viewBox="0 0 20 20"><path d="M4 2h8l4 4v12H4V2z"/><path d="M12 2v4h4" fill="none"/><line x1="7" y1="10" x2="13" y2="10"/><line x1="10" y1="7" x2="10" y2="13"/></svg></button>
      <button id="btn-extrude" title="Extrude Sketch" disabled><svg viewBox="0 0 20 20"><rect x="5" y="12" width="10" height="6" fill="none"/><rect x="7" y="6" width="6" height="6" fill="none"/><line x1="7" y1="6" x2="5" y2="12"/><line x1="13" y1="6" x2="15" y2="12"/></svg></button>
      <button id="btn-revolve" title="Revolve Sketch" disabled><svg viewBox="0 0 20 20"><ellipse cx="10" cy="10" rx="6" ry="3" fill="none"/><path d="M4 10 Q4 7, 10 7" fill="none"/><path d="M16 10 Q16 13, 10 13" fill="none"/><line x1="2" y1="4" x2="2" y2="16"/></svg></button>
    </div>
    <div class="toolbar-sep part-mode-only"></div>
    <div class="tool-group part-mode-only" data-group="part-tools">
      <span class="group-label">Part</span>
      <button id="btn-create-plane" title="Create Plane"><svg viewBox="0 0 20 20"><polygon points="2,14 10,18 18,14 10,6" fill="none" stroke-width="1.5"/><line x1="10" y1="2" x2="10" y2="6" stroke-dasharray="1.5,1.5"/></svg></button>
      <button id="btn-sketch-on-plane" title="Sketch on Plane"><svg viewBox="0 0 20 20"><polygon points="3,14 10,17 17,14 10,8" fill="none" stroke-width="1" opacity="0.5"/><line x1="6" y1="12" x2="14" y2="12" stroke-width="1.5"/><line x1="7" y1="10" x2="13" y2="10" stroke-width="1.5"/></svg></button>
      <button id="btn-extrude-part" title="Extrude"><svg viewBox="0 0 20 20"><rect x="5" y="12" width="10" height="6" fill="none"/><rect x="7" y="4" width="6" height="8" fill="none"/><line x1="7" y1="4" x2="5" y2="12"/><line x1="13" y1="4" x2="15" y2="12"/><line x1="10" y1="1" x2="10" y2="4" stroke-width="1.5"/><polygon points="8,3 10,1 12,3" fill="currentColor" stroke="none"/></svg></button>
      <button id="btn-extrude-cut" title="Extrude Cut"><svg viewBox="0 0 20 20"><rect x="5" y="4" width="10" height="6" fill="none"/><rect x="7" y="10" width="6" height="8" fill="none"/><line x1="7" y1="10" x2="5" y2="10"/><line x1="13" y1="10" x2="15" y2="10"/><line x1="10" y1="18" x2="10" y2="15" stroke-width="1.5"/><polygon points="8,17 10,19 12,17" fill="currentColor" stroke="none"/></svg></button>
    </div>
  </div>

  <!-- Properties Panel (unified right sidebar) -->
  <div id="properties-panel">
    <!-- Feature Tree Section (shown in Part mode) -->
    <div id="feature-panel" class="sidebar-section"></div>

    <!-- Parameters Section (shown when feature selected) -->
    <div id="parameters-panel" class="sidebar-section"></div>

    <div class="sidebar-section" id="properties-section">
      <h3>Properties</h3>
      <div id="properties-content">
        <p class="hint">Select an entity to view properties</p>
      </div>
    </div>
    <hr />
    <div class="sidebar-section" id="layers-section">
      <h3>Layers</h3>
      <div id="layers-panel">
        <div class="layer-row active-layer" data-layer="0">
          <span class="layer-color" style="background:#fff"></span>
          <span class="layer-name">0</span>
          <button class="layer-visibility" title="Toggle visibility">&#128065;</button>
        </div>
      </div>
      <button id="btn-add-layer" title="Add Layer">+ Layer</button>
    </div>
  </div>

  <!-- Left Panel (Primitives & Constraints) -->
  <div id="left-panel">
    <div id="primitives-section">
      <h3>Primitives</h3>
      <div id="primitives-list"></div>
    </div>
    <hr />
    <div id="dimensions-section">
      <h3>Dimensions <button id="btn-toggle-all-dims" class="lp-toggle-all" title="Toggle all dimensions visibility">üëÅ</button></h3>
      <div id="dimensions-list"></div>
    </div>
    <hr />
    <div id="constraints-section">
      <h3>Constraints <button id="btn-toggle-all-constraints" class="lp-toggle-all" title="Toggle all constraint icons">üëÅ</button> <span id="constraints-filter-badge" class="filter-badge" style="display:none" title="Filtered by selection">‚äò</span></h3>
      <div id="constraints-list"></div>
    </div>
    <hr />
    <div id="variables-section">
      <h3>Variables</h3>
      <div id="variables-list"></div>
      <button id="btn-add-variable" title="Add Variable">+ Variable</button>
    </div>
  </div>

  <!-- Unified 3D View (replaces 2D canvas) -->
  <div id="view-3d"></div>

  <!-- Exit Sketch floating button (visible only in sketch-on-plane mode) -->
  <button id="btn-exit-sketch" class="exit-sketch-btn" style="display:none">
    <svg viewBox="0 0 20 20" width="18" height="18"><polyline points="12,4 4,10 12,16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    Exit Sketch
  </button>

  <!-- Node Tree Overlay (transparent, top-left of viewport) -->
  <div id="node-tree" class="node-tree">
    <div class="node-tree-header">Part</div>
    <div class="node-tree-content" id="node-tree-content">
      <div class="node-tree-item node-tree-origin">
        <span class="node-tree-icon">‚äï</span>
        <span class="node-tree-label">Origin</span>
      </div>
      <div class="node-tree-children">
        <div class="node-tree-item node-tree-plane" data-plane="XY">
          <span class="node-tree-icon" style="color:#ff4444">‚ñ¨</span>
          <span class="node-tree-label">XY Plane</span>
        </div>
        <div class="node-tree-item node-tree-plane" data-plane="XZ">
          <span class="node-tree-icon" style="color:#44ff44">‚ñ¨</span>
          <span class="node-tree-label">XZ Plane</span>
        </div>
        <div class="node-tree-item node-tree-plane" data-plane="YZ">
          <span class="node-tree-icon" style="color:#4488ff">‚ñ¨</span>
          <span class="node-tree-label">YZ Plane</span>
        </div>
      </div>
      <div id="node-tree-features" class="node-tree-features">
        <!-- Feature history timeline populated dynamically -->
      </div>
    </div>
  </div>

  <!-- Hidden canvas used for viewport coordinate transforms -->
  <canvas id="cad-canvas" style="display:none;"></canvas>

  <!-- Motion Analysis Panel -->
  <div id="motion-panel" class="motion-panel" style="display:none">
    <div class="motion-panel-header">
      <span class="motion-title">üé¨ Motion Analysis</span>
      <div class="motion-header-actions">
        <button id="motion-export-csv" class="motion-btn-sm" title="Export CSV" style="display:none">üìä CSV</button>
        <button id="motion-close" class="motion-btn-sm motion-btn-close" title="Close">‚úï</button>
      </div>
    </div>

    <!-- Setup View -->
    <div id="motion-setup" class="motion-setup">
      <div class="motion-section">
        <label class="motion-label">Driver (reference parameter)</label>
        <select id="motion-driver" class="motion-select"><option value="">‚Äî Select a driving dimension, constraint, or variable ‚Äî</option></select>
      </div>
      <div class="motion-row">
        <div class="motion-field">
          <label class="motion-label">From</label>
          <input id="motion-from" type="number" class="motion-input" step="any" value="0" />
        </div>
        <div class="motion-field">
          <label class="motion-label">To</label>
          <input id="motion-to" type="number" class="motion-input" step="any" value="100" />
        </div>
        <div class="motion-field">
          <label class="motion-label">Steps</label>
          <input id="motion-steps" type="number" class="motion-input" min="1" max="10000" value="50" />
        </div>
      </div>
      <div class="motion-section">
        <label class="motion-label">Output Probes</label>
        <div id="motion-probes" class="motion-probes-list"></div>
        <div class="motion-probe-actions">
          <button id="motion-add-point-probe" class="motion-btn-sm">+ Point</button>
          <button id="motion-add-dim-probe" class="motion-btn-sm">+ Dimension</button>
        </div>
      </div>
      <div class="motion-actions">
        <button id="motion-run" class="motion-btn primary">‚ñ∂ Run Analysis</button>
      </div>
    </div>

    <!-- Playback View -->
    <div id="motion-playback" class="motion-playback" style="display:none">
      <div class="motion-transport">
        <button id="motion-play" class="motion-btn-sm" title="Play / Pause">‚ñ∂</button>
        <input id="motion-slider" type="range" class="motion-slider" min="0" max="100" step="0.1" value="0" />
        <span id="motion-frame-info" class="motion-frame-info">0 / 0</span>
      </div>
      <div class="motion-row">
        <div class="motion-field">
          <label class="motion-label">Speed</label>
          <input id="motion-speed" type="range" class="motion-speed" min="0.1" max="5" step="0.1" value="1" />
          <span id="motion-speed-label" class="motion-speed-label">1.0√ó</span>
        </div>
        <div class="motion-field">
          <label class="motion-label">Driver value</label>
          <span id="motion-driver-value" class="motion-value">‚Äî</span>
        </div>
        <div class="motion-field" style="flex:0 0 auto">
          <button id="motion-stop" class="motion-btn-sm motion-btn-stop">‚èπ Stop</button>
        </div>
      </div>
      <div id="motion-probe-output" class="motion-probe-output"></div>
    </div>
  </div>

  <!-- Status Bar -->
  <div id="status-bar">
    <span id="status-mode" class="status-mode sketch-mode">SKETCH</span>
    <span id="status-tool">Tool: Select</span>
    <span id="status-coords">X: 0.00 Y: 0.00</span>
    <span id="status-snap">SNAP</span>
    <span id="status-autocoincidence">AUTO</span>
    <span id="status-ortho">ORTHO</span>
    <span id="status-message"></span>
  </div>

  <!-- Command Line -->
  <div id="command-line">
    <label for="cmd-input">Command:</label>
    <input type="text" id="cmd-input" placeholder="Type command..." autocomplete="off" />
  </div>

  <!-- Hidden file input -->
  <input type="file" id="file-input" accept=".dxf" style="display:none" />

  <!-- Reusable popup modal -->
  <div id="app-modal-root" class="app-modal-root" aria-hidden="true"></div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
